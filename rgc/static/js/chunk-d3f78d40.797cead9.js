(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d3f78d40"],{"2a7f":function(t,e,n){"use strict";var a=n("80d2"),r=n("71d9"),o=n("afdd"),i=n("9d26"),s=n("2b0e"),c=s["a"].extend({name:"v-toolbar-side-icon",functional:!0,render:function(t,e){var n=e.slots,a=e.listeners,r=e.props,s=e.data,c=s.staticClass?s.staticClass+" v-toolbar__side-icon":"v-toolbar__side-icon",l=Object.assign(s,{staticClass:c,props:Object.assign(r,{icon:!0}),on:a}),f=n().default;return t(o["a"],l,f||[t(i["a"],"$vuetify.icons.menu")])}});n.d(e,"b",function(){return l}),n.d(e,"a",function(){return f});var l=Object(a["e"])("v-toolbar__title"),f=Object(a["e"])("v-toolbar__items");r["a"]},3385:function(t,e,n){},"3c43":function(t,e){e.endianness=function(){return"LE"},e.hostname=function(){return"undefined"!==typeof location?location.hostname:""},e.loadavg=function(){return[]},e.uptime=function(){return 0},e.freemem=function(){return Number.MAX_VALUE},e.totalmem=function(){return Number.MAX_VALUE},e.cpus=function(){return[]},e.type=function(){return"Browser"},e.release=function(){return"undefined"!==typeof navigator?navigator.appVersion:""},e.networkInterfaces=e.getNetworkInterfaces=function(){return{}},e.arch=function(){return"javascript"},e.platform=function(){return"browser"},e.tmpdir=e.tmpDir=function(){return"/tmp"},e.EOL="\n",e.homedir=function(){return"/"}},"3fcc":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{"grid-list-md":"","text-xs-center":""}},[n("div",{attrs:{id:"app"}},[n("v-app",{attrs:{id:"inspire"}},[n("v-container",{attrs:{"grid-list-md":"","text-xs-center":""}},[n("v-layout",[n("v-flex",{attrs:{xs12:""}},[n("v-card",[n("v-card-text",{staticClass:"px-0"},[n("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[n("v-flex",{attrs:{xs12:""}},[n("v-snackbar",{attrs:{bottom:"bottom"===t.y,color:t.alertcolor,left:"left"===t.x,"multi-line":"multi-line"===t.mode,right:"right"===t.x,timeout:t.timeout,top:"top"===t.y,vertical:"vertical"===t.mode},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(t._s(t.text))]),n("v-toolbar",{attrs:{flat:"",color:"white"}},[n("v-toolbar-title",[t._v("车辆台架连接操作")])],1)],1),n("v-flex",{attrs:{xs1:""}},[n("v-subheader",[t._v("车辆选择")])],1),n("v-flex",{attrs:{xs2:""}},[n("v-select",{attrs:{items:t.car_items_conn,"item-text":"carLicense","item-value":"abbr",label:"请选择要连接的车辆","persistent-hint":"","return-object":"","single-line":""},model:{value:t.car_conn,callback:function(e){t.car_conn=e},expression:"car_conn"}})],1),n("v-flex",{attrs:{xs1:""}}),n("v-flex",{attrs:{xs1:""}},[n("v-subheader",[t._v("台架选择")])],1),n("v-flex",{attrs:{xs2:""}},[n("v-select",{attrs:{items:t.platform_items_conn,"item-text":"platformName","item-value":"abbr",label:"请选择要连接的台架","persistent-hint":"","return-object":"","single-line":""},model:{value:t.platform_conn,callback:function(e){t.platform_conn=e},expression:"platform_conn"}})],1),n("v-flex",{attrs:{xs2:""}},[n("v-btn",{attrs:{id:"add",color:"success"},on:{click:t.execute}},[t._v("连接")])],1)],1)],1)],1)],1)],1),n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-card",{attrs:{color:"rgba(238,238,238)"}},[n("v-card-text",{staticClass:"px-0"},[[n("div",[n("v-toolbar",{attrs:{flat:"",color:"white"}},[n("v-toolbar-title",[t._v("车辆台架状态展示")])],1),n("v-data-table",{attrs:{headers:t.headers,items:t.car_plat_list,"rows-per-page-text":"每页条数","rows-per-page-items":t.rowsPerPageItems},scopedSlots:t._u([{key:"items",fn:function(e){return[n("td",{staticClass:"text-xs-center"},[t._v("\n                          "+t._s(e.item.carInfo.carLicense)+"\n                        ")]),n("td",{staticClass:"text-xs-center"},[t._v("\n                          "+t._s(e.item.platformInfo.platformName)+"\n                        ")]),n("td",{staticClass:"text-xs-center"},[t._v("\n                          "+t._s(e.item.create_at)+"\n                        ")]),n("td",{staticClass:"text-xs-center"},[n("v-btn",{attrs:{id:"add",color:"success"},on:{click:function(n){return t.dis_conn(e.item,e.item.carInfo.carId,e.item.platformInfo.platformId)}}},[t._v("断开")])],1)]}},{key:"no-data",fn:function(){return[n("p",[t._v("暂无已经连接的车辆")])]},proxy:!0}])})],1)]],2)],1)],1)],1)],1)],1)],1),n("v-layout")],1)},r=[],o=(n("2f62"),n("3c43"),{data:function(){return{headers:[{text:"车辆",align:"center",value:"car"},{text:"架台",align:"center",value:"platform"},{text:"连接时间",align:"center",value:"create_at"},{text:"断开",align:"center"}],rowsPerPageItems:[5,10],snackbar:!1,y:"top",alertcolor:"",x:null,mode:"",timeout:3e3,text:"",plat_msg:"",car_msg:"",plat_chosen:[],platform_conn:{},platform_items_conn:[],car_conn:{},car_items_conn:[],car_platform:[],car_plat_list:[{carInfo:"",platformInfo:"",create_at:""}]}},created:function(){this.init_plat(),this.init_car(),this.state_data()},sockets:{connect:function(){this.id=this.$socket.id},server_response:function(t){var e=t.data.deviceid;"1"==t.data.type?this.search_msg(e,"getCarinfo/"):"2"==t.data.type&&this.search_msg(e,"getPlatforminfo/")}},methods:{init_plat:function(){var t=this;this.$axios({method:"get",url:"getPlatformlist/"}).then(function(e){var n=e.data.data;t.handle_data(n,"platform")})},init_car:function(){var t=this;this.$axios({method:"get",url:"getCarlist/"}).then(function(e){var n=e.data.data;t.handle_data(n,"car")})},state_data:function(){var t=this;this.$axios({method:"get",url:"connectGetlist/"}).then(function(e){t.car_plat_list=e.data.data}).catch(function(e){var n=e.message;-1!==n.indexOf("Network")&&(t.snackbar=!0,t.alertcolor="error",t.text="网络异常")})},handle_data:function(t,e){for(var n=[],a=0;a<t.length;a++)1==t[a].online&&0==t[a].is_conn&&n.push(t[a]);t=n,"car"==e?this.car_items_conn=t:this.platform_items_conn=t},search_msg:function(t,e){var n=this;"getCarinfo/"==e?this.$axios({method:"get",url:e,params:{carId:t}}).then(function(e){n.show_state(e,"car"),n.change_msg(e.data,t,"1")}):this.$axios({method:"get",url:e,params:{platformId:t}}).then(function(e){n.show_state(e,"platform"),n.change_msg(e.data,t,"2")})},change_msg:function(t,e,n){if(1==n){for(var a=[],r=0;r<this.car_items_conn.length;r++)a.push(this.car_items_conn[r].carId);if(a.indexOf(e)>-1)if(0==t.data.online){console.log("让车辆"+e+"下线");for(var o=0;o<this.car_items_conn.length;o++)this.car_items_conn[o].carId==t.data.carId&&this.car_items_conn.splice(o,1)}else console.log("更改"+e+"属性");else if(1==t.data.online){var i=this.car_items_conn.length;this.car_items_conn.splice(i,1,t.data)}else console.log("已经下线，无法再次下线")}else if(2==n){var s=[];for(r=0;r<this.platform_items_conn.length;r++)s.push(this.platform_items_conn[r].platformId);if(s.indexOf(e)>-1)if(0==t.data.online){console.log("让台架"+e+"下线");for(o=0;o<this.platform_items_conn.length;o++)this.platform_items_conn[o].platformId==t.data.platformId&&(console.log(this.platform_items_conn),this.platform_items_conn.splice(o,1),console.log(this.platform_items_conn))}else console.log("更改"+e+"属性");else if(1==t.data.online){console.log(e+"让该台架上线");var c=this.platform_items_conn.length;this.platform_items_conn.splice(c,1,t.data)}else console.log("已经下线，无法再次下线")}},execute:function(){var t=this;this.$axios({method:"post",url:"connectstatusdevice/",data:{carId:this.car_conn.carId,platformId:this.platform_conn.platformId,is_conn:1},transformRequest:[function(t){var e="";for(var n in t)e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n])+"&";return e}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){200==e.data.code?(t.snackbar=!0,t.alertcolor="green",t.text=e.data.msg,t.state_data(),t.delete_msg(t.car_conn.carId,t.platform_conn.platformId)):(t.snackbar=!0,t.alertcolor="error",t.text=e.data.msg)})},delete_msg:function(t,e){for(var n=0;n<this.platform_items_conn.length;n++)this.platform_items_conn[n].platformId==e&&(console.log(this.platform_items_conn),this.platform_items_conn.splice(n,1),console.log(this.platform_items_conn));for(n=0;n<this.car_items_conn.length;n++)this.car_items_conn[n].carId==t&&(console.log(this.car_items_conn),this.car_items_conn.splice(n,1),console.log(this.car_items_conn))},dis_conn:function(t,e,n){var a=this;this.$axios({method:"post",url:"connectstatusdevice/",data:{platformId:n,carId:e,is_conn:0},transformRequest:[function(t){var e="";for(var n in t)e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n])+"&";return e}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){if(200==e.data.code){a.snackbar=!0,a.alertcolor="success",a.text=e.data.msg;var n=a.car_plat_list.indexOf(t);a.car_plat_list.splice(n,1),a.init_plat(),a.init_car()}})},show_state:function(t,e){console.log(t);for(var n=[],a=[],r=0;r<this.car_plat_list.length;r++)console.log(this.car_plat_list[r]),"car"==e?(n.push(this.car_plat_list[r].carInfo.carId),console.log(this.car_plat_list[r].carInfo.carId)):"platform"==e&&a.push(this.car_plat_list[r].platformInfo.platformId);if("car"==e){if(n.indexOf(t.data.data.carId)>-1)for(r=0;r<n.length;r++)n[r]==t.data.data.carId&&(0==t.data.data.is_conn?(console.log("车辆删除"),this.car_plat_list.splice(r,1)):(console.log("车辆修改"),this.car_plat_list[r].carInfo=t.data.data))}else if("platform"==e&&a.indexOf(t.data.data.platformId)>-1)for(r=0;r<a.length;r++)a[r]==t.data.data.platformId&&(0==t.data.data.is_conn?(console.log("台架删除"),this.car_plat_list.splice(r,1)):(console.log("台架修改"),this.car_plat_list[r].platformInfo=t.data.data));this.init_plat(),this.init_car()}}}),i=o,s=n("2877"),c=n("6544"),l=n.n(c),f=n("7496"),u=n("8336"),d=n("b0af"),h=n("99d9"),p=n("a523"),m=n("8fea"),v=n("0e8f"),_=n("a722"),g=n("b56d"),y=n("2db4"),b=n("e0c7"),x=n("71d9"),I=n("2a7f"),w=Object(s["a"])(i,a,r,!1,null,null,null);e["default"]=w.exports;l()(w,{VApp:f["a"],VBtn:u["a"],VCard:d["a"],VCardText:h["b"],VContainer:p["a"],VDataTable:m["a"],VFlex:v["a"],VLayout:_["a"],VSelect:g["a"],VSnackbar:y["a"],VSubheader:b["a"],VToolbar:x["a"],VToolbarTitle:I["b"]})},7496:function(t,e,n){"use strict";n("3385");var a=n("d9bd");function r(t){var e=void 0;if("number"===typeof t)e=t;else{if("string"!==typeof t)throw new TypeError("Colors can only be numbers or strings, recieved "+(null==t?t:t.constructor.name)+" instead");var n="#"===t[0]?t.substring(1):t;3===n.length&&(n=n.split("").map(function(t){return t+t}).join("")),6!==n.length&&Object(a["c"])("'"+t+"' is not a valid rgb color"),e=parseInt(n,16)}return e<0?(Object(a["c"])("Colors cannot be negative: '"+t+"'"),e=0):(e>16777215||isNaN(e))&&(Object(a["c"])("'"+t+"' is not a valid rgb color"),e=16777215),e}function o(t){var e=t.toString(16);return e.length<6&&(e="0".repeat(6-e.length)+e),"#"+e}function i(t){return o(r(t))}var s=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],c=function(t){return t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055},l=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],f=function(t){return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)};function u(t){return Math.max(0,Math.min(1,t))}function d(t){for(var e=Array(3),n=c,a=s,r=0;r<3;++r)e[r]=Math.round(255*u(n(a[r][0]*t[0]+a[r][1]*t[1]+a[r][2]*t[2])));return(e[0]<<16)+(e[1]<<8)+(e[2]<<0)}function h(t){for(var e=[0,0,0],n=f,a=l,r=n((t>>16&255)/255),o=n((t>>8&255)/255),i=n((t>>0&255)/255),s=0;s<3;++s)e[s]=a[s][0]*r+a[s][1]*o+a[s][2]*i;return e}var p=.20689655172413793,m=function(t){return t>Math.pow(p,3)?Math.cbrt(t):t/(3*Math.pow(p,2))+4/29},v=function(t){return t>p?Math.pow(t,3):3*Math.pow(p,2)*(t-4/29)};function _(t){var e=m,n=e(t[1]);return[116*n-16,500*(e(t[0]/.95047)-n),200*(n-e(t[2]/1.08883))]}function g(t){var e=v,n=(t[0]+16)/116;return[.95047*e(n+t[1]/500),e(n),1.08883*e(n-t[2]/200)]}var y=function(){function t(t,e){var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=t[Symbol.iterator]();!(a=(i=s.next()).done);a=!0)if(n.push(i.value),e&&n.length===e)break}catch(c){r=!0,o=c}finally{try{!a&&s["return"]&&s["return"]()}finally{if(r)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),b="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function x(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object.keys(t),a={},o=0;o<n.length;++o){var s=n[o],c=t[s];e?("base"===s||s.startsWith("lighten")||s.startsWith("darken"))&&(a[s]=i(c)):"object"===("undefined"===typeof c?"undefined":b(c))?a[s]=x(c,!0):a[s]=O(s,r(c))}return a}var I=function(t,e){return"\n."+t+" {\n  background-color: "+e+" !important;\n  border-color: "+e+" !important;\n}\n."+t+"--text {\n  color: "+e+" !important;\n  caret-color: "+e+" !important;\n}"},w=function(t,e,n){var a=e.split(/(\d)/,2),r=y(a,2),o=r[0],i=r[1];return"\n."+t+"."+o+"-"+i+" {\n  background-color: "+n+" !important;\n  border-color: "+n+" !important;\n}\n."+t+"--text.text--"+o+"-"+i+" {\n  color: "+n+" !important;\n  caret-color: "+n+" !important;\n}"},k=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base";return"--v-"+t+"-"+e},C=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base";return"var("+k(t,e)+")"};function $(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object.keys(t);if(!n.length)return"";var a="",r="",o=e?C("primary"):t.primary.base;r+="a { color: "+o+"; }";for(var i=0;i<n.length;++i){var s=n[i],c=t[s];if("object"===("undefined"===typeof c?"undefined":b(c))){r+=I(s,e?C(s):c.base),e&&(a+="  "+k(s)+": "+c.base+";\n");for(var l=Object.keys(c),f=0;f<l.length;++f){var u=l[f],d=c[u];"base"!==u&&(r+=w(s,u,e?C(s,u):d),e&&(a+="  "+k(s,u)+": "+d+";\n"))}}}return e&&(a=":root {\n"+a+"}\n\n"),a+r}function O(t,e){for(var n={base:o(e)},a=5;a>0;--a)n["lighten"+a]=o(j(e,a));for(var r=1;r<=4;++r)n["darken"+r]=o(S(e,r));return n}function j(t,e){var n=_(h(t));return n[0]=n[0]+10*e,d(g(n))}function S(t,e){var n=_(h(t));return n[0]=n[0]-10*e,d(g(n))}var T={data:function(){return{style:null}},computed:{parsedTheme:function(){return x(this.$vuetify.theme)},generatedStyles:function(){var t=this.parsedTheme,e=void 0;return null!=this.$vuetify.options.themeCache&&(e=this.$vuetify.options.themeCache.get(t),null!=e)?e:(e=$(t,this.$vuetify.options.customProperties),null!=this.$vuetify.options.minifyTheme&&(e=this.$vuetify.options.minifyTheme(e)),null!=this.$vuetify.options.themeCache&&this.$vuetify.options.themeCache.set(t,e),e)},vueMeta:function(){if(!1===this.$vuetify.theme)return{};var t={cssText:this.generatedStyles,id:"vuetify-theme-stylesheet",type:"text/css"};return this.$vuetify.options.cspNonce&&(t.nonce=this.$vuetify.options.cspNonce),{style:[t]}}},metaInfo:function(){return this.vueMeta},head:function(){return this.vueMeta},watch:{generatedStyles:function(){!this.meta&&this.applyTheme()}},created:function(){if(!1!==this.$vuetify.theme)if(this.$meta);else if("undefined"===typeof document&&this.$ssrContext){var t=this.$vuetify.options.cspNonce?' nonce="'+this.$vuetify.options.cspNonce+'"':"";this.$ssrContext.head=this.$ssrContext.head||"",this.$ssrContext.head+='<style type="text/css" id="vuetify-theme-stylesheet"'+t+">"+this.generatedStyles+"</style>"}else"undefined"!==typeof document&&(this.genStyle(),this.applyTheme())},methods:{applyTheme:function(){this.style&&(this.style.innerHTML=this.generatedStyles)},genStyle:function(){var t=document.getElementById("vuetify-theme-stylesheet");t||(t=document.createElement("style"),t.type="text/css",t.id="vuetify-theme-stylesheet",this.$vuetify.options.cspNonce&&t.setAttribute("nonce",this.$vuetify.options.cspNonce),document.head.appendChild(t)),this.style=t}}},M=n("6a18"),V=n("0d3d"),N=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t};e["a"]={name:"v-app",directives:{Resize:V["a"]},mixins:[T,M["a"]],props:{id:{type:String,default:"app"},dark:Boolean},computed:{classes:function(){return N({"application--is-rtl":this.$vuetify.rtl},this.themeClasses)}},watch:{dark:function(){this.$vuetify.dark=this.dark}},mounted:function(){this.$vuetify.dark=this.dark},render:function(t){var e={staticClass:"application",class:this.classes,attrs:{"data-app":!0},domProps:{id:this.id}},n=t("div",{staticClass:"application--wrap"},this.$slots.default);return t("div",e,[n])}}}}]);
//# sourceMappingURL=chunk-d3f78d40.797cead9.js.map