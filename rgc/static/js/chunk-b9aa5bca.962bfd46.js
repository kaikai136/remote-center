(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b9aa5bca"],{"0422":function(t,a,e){},9910:function(t,a,e){"use strict";e.d(a,"a",function(){return o});var r=e("80d2"),n=e("a523"),s=e("549c"),i=e("0e8f"),c=e("a722"),o=Object(r["e"])("spacer","div","v-spacer");n["a"],s["a"],i["a"],c["a"]},bc19:function(t,a,e){"use strict";var r=e("0422"),n=e.n(r);n.a},c396:function(t,a,e){},d194:function(t,a,e){"use strict";var r=e("c396"),n=e.n(r);n.a},ec90:function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("v-container",{attrs:{"grid-list-md":"","text-xs-center":""}},[e("v-layout",{attrs:{row:"",wrap:""}},[e("v-snackbar",{attrs:{bottom:"bottom"===t.y,color:t.alertcolor,left:"left"===t.x,"multi-line":"multi-line"===t.mode,right:"right"===t.x,timeout:t.timeout,top:"top"===t.y,vertical:"vertical"===t.mode},model:{value:t.snackbar,callback:function(a){t.snackbar=a},expression:"snackbar"}},[t._v(t._s(t.text))]),e("v-flex",{attrs:{xs12:""}},[e("v-card",{attrs:{color:"rgba(238,238,238)"}},[e("v-card-text",{staticClass:"px-0"},[[e("div",[e("v-toolbar",{attrs:{flat:"",color:"#eee"}},[e("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[t._v("车辆管理")]),e("v-btn",{attrs:{id:"add"},on:{click:function(a){t.dialog_add=!0}}},[e("i",{staticClass:"fas fa-plus"}),t._v("添加\n                  ")]),e("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:t.dialog_add,callback:function(a){t.dialog_add=a},expression:"dialog_add"}},[e("v-card",[e("v-card-title",{staticClass:"headline",domProps:{textContent:t._s(t.defaultItem.id?"编辑车辆":"新增车辆")}}),e("v-card-text",[e("v-container",{attrs:{fluid:"","grid-list-md":""}},[e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{attrs:{"d-flex":"",xs12:"",sm12:"",md12:""}},[e("v-card-text",[e("v-form",{ref:"form"},[e("v-text-field",{attrs:{label:"车辆牌照",rules:t.licenseRules},model:{value:t.defaultItem.carLicense,callback:function(a){t.$set(t.defaultItem,"carLicense",a)},expression:"defaultItem.carLicense"}})],1)],1)],1)],1)],1)],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:function(a){return t.cancel()}}},[t._v("取消")]),e("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:function(a){return t.add_save()}}},[t._v("保存")])],1)],1)],1)],1),e("v-data-table",{attrs:{headers:t.headers,items:t.datalist,pagination:t.pagination,"rows-per-page-text":"每页条数","rows-per-page-items":t.rowsPerPageItems},on:{"update:pagination":function(a){t.pagination=a}},scopedSlots:t._u([{key:"items",fn:function(a){return[e("td",{staticClass:"text-xs-center"},[t._v(t._s(a.item.carId))]),e("td",{staticClass:"text-xs-center"},[t._v(t._s(a.item.carIp))]),e("td",{staticClass:"text-xs-center"},[t._v("\n                      "+t._s(a.item.carLicense)+"\n                    ")]),e("td",{staticClass:"text-xs-center"},[t._v("\n                      "+t._s(a.item.online?"在线":"离线")+"\n                    ")]),e("td",{staticClass:"text-xs-center"},[t._v("\n                      "+t._s(a.item.is_conn?"连接":"未连接")+"\n                    ")]),e("td",{staticClass:"text-xs-center"},[t._v(t._s(a.item.create_at))]),e("td",{staticClass:"text-xs-center"},[t._v(t._s(a.item.app_key))]),e("td",{staticClass:"text-xs-center"},[t._v("\n                      "+t._s(a.item.app_secret)+"\n                    ")]),e("td",{staticClass:"text-xs-center"},[e("v-icon",{staticClass:"f_green",attrs:{small:""},on:{click:function(e){return t.editCar(a.item)}}},[t._v("编辑")]),e("v-icon",{staticClass:"f_green",attrs:{small:""},on:{click:function(e){return t.deleteItem(a.item.carId)}}},[t._v("删除")])],1)]}},{key:"no-data",fn:function(){return[e("p",[t._v("暂无符合条件的选项")])]},proxy:!0}])})],1)]],2)],1)],1)],1)],1)],1)},n=[],s={data:function(){return{pagination:{sortBy:"carId",descending:!0},dialog:!1,dialog_add:!1,snackbar:!1,y:"top",alertcolor:"",x:null,mode:"",timeout:3e3,text:"",id:"",rowsPerPageItems:[5,10],date:(new Date).toISOString().substr(0,10),staffitems:["admin","人员 车辆","人员运维","车辆管理"],headers:[{text:"\t车辆ID",value:"carId"},{text:"车辆IP",value:"carIp"},{text:"车辆牌照",value:"carLicense"},{text:"是否在线 ",value:"online"},{text:"是否连接 ",value:"is_conn"},{text:"创建时间 ",value:"creat_at"},{text:"App_key",value:"app_key"},{text:"App_密钥",value:"app_secret"},{text:"操作 ",value:"handel"}],defaultItem:{id:"",carLicense:""},licenseRules:[function(t){return!!t||"车辆牌照不可为空"},function(t){return/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}[A-Z0-9]{4}[A-Z0-9挂学警港澳]{1}$/.test(t)||"车辆牌照格式错误"}],datalist:[{id:"",carId:"",carIp:"",carLicense:"",online:"",is_conn:"",app_key:"",create_at:""}],page:"1"}},created:function(){this.initialize()},sockets:{connect:function(){this.id=this.$socket.id},server_response:function(t){var a=t.data.deviceid;"1"==t.data.type&&this.search_msg(a)}},methods:{deleteItem:function(t){var a=this;confirm("你确定删除吗?")&&this.$axios({method:"get",url:"CarDelete/",params:{carId:t}}).then(function(t){200===t.data.code?(a.snackbar=!0,a.alertcolor="green",a.text=t.data.msg,a.initialize()):(a.snackbar=!0,a.alertcolor="error",a.text=t.data.msg)})},editCar:function(t){var a=this;this.$axios({method:"get",url:"getCarinfo/",params:{carId:t.carId}}).then(function(t){200===t.data.code?(a.defaultItem.id=t.data.data.id,a.defaultItem.carLicense=t.data.data.carLicense,a.dialog_add=!0):(a.snackbar=!0,a.alertcolor="error",a.text=t.data.msg)})},add_save:function(){var t=this,a=this.$refs.form.validate();if(!1===a)return!1;this.defaultItem.id?this.$axios({method:"post",url:"updateCarInfo/",data:{id:this.defaultItem.id,carLicense:this.defaultItem.carLicense},transformRequest:[function(t){var a="";for(var e in t)a+=encodeURIComponent(e)+"="+encodeURIComponent(t[e])+"&";return a}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(a){200===a.data.code?(t.snackbar=!0,t.alertcolor="green",t.text=a.data.msg,t.dialog_add=!1,t.defaultItem.id="",t.$refs.form.reset(),t.initialize()):(t.snackbar=!0,t.alertcolor="error",t.text=a.data.msg)}):this.$axios({method:"post",url:"CarAdd/",data:{carLicense:this.defaultItem.carLicense},transformRequest:[function(t){var a="";for(var e in t)a+=encodeURIComponent(e)+"="+encodeURIComponent(t[e])+"&";return a}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(a){200===a.data.code?(t.snackbar=!0,t.alertcolor="green",t.text=a.data.msg,t.dialog_add=!1,t.defaultItem.id="",t.$refs.form.reset(),t.initialize()):(t.snackbar=!0,t.alertcolor="error",t.text=a.data.msg)})},cancel:function(){this.dialog_add=!1,this.$refs.form.reset(),this.defaultItem.id=""},change_msg:function(t){for(var a=[],e=0;e<this.datalist.length;e++)a.push(this.datalist[e].id);var r=t.data.id;if(a.indexOf(r)>-1)for(var n=0;n<this.datalist.length;n++)this.datalist[n].id==t.data.id&&(this.datalist[n]=t.data,this.datalist.splice(n,1,t.data));else{var s=this.msg_arr.length;this.datalist[s]=t.data,this.datalist.splice(s,1,t.data)}},initialize:function(){var t=this;this.$axios({method:"get",url:"/getCarlist/"}).then(function(a){var e=a.data.data;t.datalist=e}).catch(function(a){var e=a.message;-1!==e.indexOf("Network")&&(t.snackbar=!0,t.alertcolor="error",t.text="网络异常")})},search_msg:function(t){var a=this;this.$axios({method:"get",url:"getCarinfo/",params:{carId:t}}).then(function(t){a.change_msg(t.data)})}}},i=s,c=(e("bc19"),e("d194"),e("2877")),o=e("6544"),d=e.n(o),l=e("8336"),u=e("b0af"),f=e("99d9"),m=e("12b2"),v=e("a523"),x=e("8fea"),p=e("169a"),h=e("0e8f"),g=e("4bd4"),_=e("132d"),b=e("a722"),I=e("2db4"),k=e("9910"),C=e("2677"),w=e("71d9"),y=Object(c["a"])(i,r,n,!1,null,"1518a5ee",null);a["default"]=y.exports;d()(y,{VBtn:l["a"],VCard:u["a"],VCardActions:f["a"],VCardText:f["b"],VCardTitle:m["a"],VContainer:v["a"],VDataTable:x["a"],VDialog:p["a"],VFlex:h["a"],VForm:g["a"],VIcon:_["a"],VLayout:b["a"],VSnackbar:I["a"],VSpacer:k["a"],VTextField:C["a"],VToolbar:w["a"]})}}]);
//# sourceMappingURL=chunk-b9aa5bca.962bfd46.js.map