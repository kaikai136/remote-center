(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-722fb73e"],{"0fd6":function(t,a,e){},"243d":function(t,a,e){"use strict";var r=e("0fd6"),n=e.n(r);n.a},"2b56":function(t,a,e){"use strict";var r=e("f6b3f"),n=e.n(r);n.a},7277:function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("v-container",{attrs:{"grid-list-md":"","text-xs-center":""}},[e("v-layout",{attrs:{row:"",wrap:""}},[e("v-snackbar",{attrs:{bottom:"bottom"===t.y,color:t.alertcolor,left:"left"===t.x,"multi-line":"multi-line"===t.mode,right:"right"===t.x,timeout:t.timeout,top:"top"===t.y,vertical:"vertical"===t.mode},model:{value:t.snackbar,callback:function(a){t.snackbar=a},expression:"snackbar"}},[t._v(t._s(t.text))]),e("v-flex",{attrs:{xs12:""}},[e("v-card",{attrs:{color:"rgba(238,238,238)"}},[e("v-card-text",{staticClass:"px-0"},[[e("div",[e("v-toolbar",{attrs:{flat:"",color:"#eee"}},[e("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[t._v("台架管理")]),e("v-btn",{attrs:{id:"add"},on:{click:function(a){t.dialog_add=!0}}},[e("i",{staticClass:"fas fa-plus"}),t._v("添加\n                  ")]),e("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:t.dialog_add,callback:function(a){t.dialog_add=a},expression:"dialog_add"}},[e("v-card",[e("v-card-title",{staticClass:"headline",domProps:{textContent:t._s(t.defaultItem.id?"编辑台架":"新增台架")}}),e("v-card-text",[e("v-container",{attrs:{fluid:"","grid-list-md":""}},[e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{attrs:{"d-flex":"",xs12:"",sm12:"",md12:""}},[e("v-card-text",[e("v-form",{ref:"form"},[e("v-text-field",{attrs:{label:"台架名称",rules:t.nameRules},model:{value:t.defaultItem.platformName,callback:function(a){t.$set(t.defaultItem,"platformName",a)},expression:"defaultItem.platformName"}})],1)],1)],1)],1)],1)],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:function(a){return t.cancel()}}},[t._v("取消")]),e("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:function(a){return t.add_save()}}},[t._v("保存")])],1)],1)],1)],1),e("v-data-table",{attrs:{headers:t.headers,items:t.datalist,pagination:t.pagination,"rows-per-page-text":"每页条数","rows-per-page-items":t.rowsPerPageItems},on:{"update:pagination":function(a){t.pagination=a}},scopedSlots:t._u([{key:"items",fn:function(a){return[e("td",{staticClass:"text-xs-center"},[t._v("\n                      "+t._s(a.item.platformId)+"\n                    ")]),e("td",{staticClass:"text-xs-center"},[t._v("\n                      "+t._s(a.item.platformName)+"\n                    ")]),e("td",{staticClass:"text-xs-center"},[t._v("\n                      "+t._s(a.item.platformIp)+"\n                    ")]),e("td",{staticClass:"text-xs-center"},[t._v(t._s(a.item.parsePort))]),e("td",{staticClass:"text-xs-center"},[t._v("\n                      "+t._s(a.item.online?"在线":"离线")+"\n                    ")]),e("td",{staticClass:"text-xs-center"},[t._v("\n                      "+t._s(a.item.is_conn?"连接":"未连接")+"\n                    ")]),e("td",{staticClass:"text-xs-center"},[t._v(t._s(a.item.create_at))]),e("td",{staticClass:"text-xs-center"},[t._v(t._s(a.item.app_key))]),e("td",{staticClass:"text-xs-center"},[t._v("\n                      "+t._s(a.item.app_secret)+"\n                    ")]),e("td",{staticClass:"text-xs-center"},[e("v-icon",{staticClass:"f_green",attrs:{small:""},on:{click:function(e){return t.editItem(a.item)}}},[t._v("编辑")]),e("v-icon",{staticClass:"f_green",attrs:{small:""},on:{click:function(e){return t.deleteItem(a.item.platformId)}}},[t._v("删除")])],1)]}},{key:"no-data",fn:function(){return[e("p",[t._v("暂无符合条件的选项")])]},proxy:!0}])})],1)]],2)],1)],1)],1)],1)],1)},n=[],s=e("2f62"),o={data:function(){return{pagination:{sortBy:"carId",descending:!0},dialog:!1,dialog_add:!1,snackbar:!1,y:"top",alertcolor:"",x:null,mode:"",timeout:3e3,text:"",nameRules:[function(t){return!!t||"台架名称不可为空"},function(t){return/^[\u4E00-\u9FA5a-zA-Z0-9]{1}[\u4E00-\u9FA5a-zA-Z0-9_]{2,7}$/.test(t)||"台架名称格式错误"}],id:"",rowsPerPageItems:[5,10],date:(new Date).toISOString().substr(0,10),staffitems:["admin","人员 车辆","人员运维","车辆管理"],headers:[{text:"\tID",value:"platformId"},{text:"名称",value:"platformName"},{text:"\t解析IP",value:"platformIp"},{text:"\t解析端口",value:"parsePort"},{text:"\t在线状态 ",value:"online"},{text:"连接状态 ",value:"is_conn"},{text:"创建时间",value:"create_at"},{text:"App_key ",value:"app_key"},{text:"App_密钥",value:"app_secret"},{text:"操作 ",value:""}],defaultItem:{id:"",platformName:""},datalist:[{id:"",platformId:"",platformName:"",online:"",is_conn:"",create_at:"",app_key:""}],page:"1"}},watch:{dialog:function(t){t||this.close()}},sockets:{connect:function(){this.id=this.$socket.id},server_response:function(t){console.log(t);var a=t.data.deviceid;"2"==t.data.type?(console.log(123),this.search_msg(a)):console.log(345)}},created:function(){this.initialize()},methods:{initialize:function(){var t=this;this.$axios({method:"get",url:"getPlatformlist/"}).then(function(a){var e=a.data.data;t.datalist=e,t.plat_save(t.datalist)}).catch(function(a){var e=a.message;-1!==e.indexOf("Network")&&(t.snackbar=!0,t.alertcolor="error",t.text="网络异常")})},editItem:function(t){this.getItem(t.platformId)},getItem:function(t){var a=this;this.$axios({method:"get",url:"getPlatforminfo/",params:{platformId:t}}).then(function(t){200===t.data.code?(a.defaultItem.id=t.data.data.id,a.defaultItem.platformName=t.data.data.platformName,a.dialog_add=!0):(a.snackbar=!0,a.alertcolor="error",a.text=t.data.msg)})},deleteItem:function(t){var a=this;confirm("你确定删除吗?")&&this.$axios({method:"get",url:"PlatformDelete/",params:{platformId:t}}).then(function(t){200===t.data.code?(a.snackbar=!0,a.alertcolor="green",a.text=t.data.msg,a.initialize()):(a.snackbar=!0,a.alertcolor="error",a.text=t.data.msg)})},add_save:function(){var t=this,a=this.$refs.form.validate();if(!1===a)return!1;this.defaultItem.id?this.$axios({method:"post",url:"updatePlatformInfo/",data:{id:this.defaultItem.id,platformName:this.defaultItem.platformName},transformRequest:[function(t){var a="";for(var e in t)a+=encodeURIComponent(e)+"="+encodeURIComponent(t[e])+"&";return a}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(a){200===a.data.code?(t.snackbar=!0,t.alertcolor="green",t.text=a.data.msg,t.dialog_add=!1,t.defaultItem.id="",t.$refs.form.reset(),t.initialize()):(t.snackbar=!0,t.alertcolor="error",t.text=a.data.msg)}):this.$axios({method:"post",url:"PlatformAdd/",data:{platformName:this.defaultItem.platformName},transformRequest:[function(t){var a="";for(var e in t)a+=encodeURIComponent(e)+"="+encodeURIComponent(t[e])+"&";return a}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(a){200===a.data.code?(t.snackbar=!0,t.alertcolor="green",t.text=a.data.msg,t.dialog_add=!1,t.defaultItem.id="",t.$refs.form.reset(),t.initialize()):(t.snackbar=!0,t.alertcolor="error",t.text=a.data.msg)})},cancel:function(){this.dialog_add=!1,this.defaultItem.id="",this.$refs.form.reset()},plat_save:function(t){this.$store.commit("plat_msg",t)},search_msg:function(t){var a=this;this.$axios({method:"get",url:"getPlatforminfo/",params:{platformId:t}}).then(function(t){a.change_msg(t.data)})},change_msg:function(t){for(var a=[],e=0;e<this.datalist.length;e++)a.push(this.datalist[e].id);var r=t.data.id;if(a.indexOf(r)>-1){for(var n=0;n<this.datalist.length;n++)this.datalist[n].id==t.data.id&&(this.datalist[n]=t.data,this.datalist.splice(n,1,t.data));console.log(this.datalist)}else{var s=this.msg_arr.length;this.datalist[s]=t.data,this.datalist.splice(s,1,t.data)}}},computed:Object(s["b"])({count:"countnew"})},i=o,l=(e("2b56"),e("243d"),e("2877")),d=e("6544"),c=e.n(d),f=e("8336"),m=e("b0af"),u=e("99d9"),p=e("12b2"),v=e("a523"),x=e("8fea"),h=e("169a"),g=e("0e8f"),_=e("4bd4"),b=e("132d"),I=e("a722"),k=e("2db4"),C=e("9910"),w=e("2677"),y=e("71d9"),V=Object(l["a"])(i,r,n,!1,null,"51467812",null);a["default"]=V.exports;c()(V,{VBtn:f["a"],VCard:m["a"],VCardActions:u["a"],VCardText:u["b"],VCardTitle:p["a"],VContainer:v["a"],VDataTable:x["a"],VDialog:h["a"],VFlex:g["a"],VForm:_["a"],VIcon:b["a"],VLayout:I["a"],VSnackbar:k["a"],VSpacer:C["a"],VTextField:w["a"],VToolbar:y["a"]})},9910:function(t,a,e){"use strict";e.d(a,"a",function(){return l});var r=e("80d2"),n=e("a523"),s=e("549c"),o=e("0e8f"),i=e("a722"),l=Object(r["e"])("spacer","div","v-spacer");n["a"],s["a"],o["a"],i["a"]},f6b3f:function(t,a,e){}}]);
//# sourceMappingURL=chunk-722fb73e.6f8ffb9c.js.map